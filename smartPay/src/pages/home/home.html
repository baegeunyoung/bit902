<ion-header>
  <ion-navbar>
     <button ion-button icon-only menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-buttons end>
      <button ion-button outline color="dark" *ngIf="isScanning==false" (click) = "startScanning()" >메뉴보기</button>
      <ion-spinner end *ngIf="isScanning==true" name="crescent"></ion-spinner>
    </ion-buttons>
    <ion-title>
      거기서 주문해
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
 
  <ion-list  *ngIf="major == 10000" no-lines>
    <ion-item *ngFor="let beacon of beacons">
    <ion-grid>
      <ion-row>
        <ion-col>Major</ion-col>
        <ion-col>{{beacon.major}}</ion-col>
      </ion-row>
      <ion-row>
        <ion-col>Minor</ion-col>
        <ion-col>{{beacon.minor}}</ion-col>
      </ion-row>
      <ion-row>
        <ion-col>RSSI</ion-col>
        <ion-col>{{beacon.rssi}}dB</ion-col>
      </ion-row>
      <ion-row>
        <ion-col>TX</ion-col>
        <ion-col>{{beacon.tx}}</ion-col>
      </ion-row>
      <ion-row>
        <ion-col>ACCURACY</ion-col>
        <ion-col>{{beacon.accuracy}}</ion-col>
      </ion-row>
    </ion-grid>
    </ion-item>
  </ion-list>   
  
  <ion-item>
    <ion-input type="text" [(ngModel)]="data.search" placeholder="매장이름을 입력하세요."></ion-input>
    <button ion-button item-right (click) = search()><ion-icon name="search"></ion-icon></button>
  </ion-item>

    


  <ion-list>
    <div *ngIf="menu==undefined">
        <div *ngFor="let event of homeEvents">
          <ion-card>
            <img src = "http://14.32.66.123:10002/bit902web/upload/{{event.filePath}}/{{event.systemName}}" style= "height:200px;"/>
            <ion-card-content>
              <ion-card-title>
                {{event.storeName}}
              </ion-card-title>
              <p>
                {{event.eventTitle}}
              </p>
            </ion-card-content>
          </ion-card>
        </div>
    </div>
  </ion-list>


  <div *ngIf="major != 0">{{ store }}</div>

  <template ngFor let-menu [ngForOf]="menu">  
  <ion-list>
  <ion-item>
  
     <ion-thumbnail item-left>     
       <template ngFor let-menuFile [ngForOf]="menuFile">       
         <p *ngIf = "menu.menuNo == menuFile.menuNo">
             <img src = "http://14.32.66.123:10002/bit902web/upload/{{menuFile.filePath}}/{{menuFile.systemName}}"/>
         </p>   
       </template>
    </ion-thumbnail>
    
    <h2>{{menu.name}}</h2>
    <p>{{menu.price}}원</p>   
    <p>수량:<button ion-button color="light" icon-only (click)="orderPlus(menu)">
        <ion-icon name='arrow-up'></ion-icon>
    </button>
     <input type="text" style="width:35px" [(ngModel)]="menu.quantity"/>
    <button  ion-button color="light" icon-only (click)="orderMinus(menu)">
      <ion-icon name='arrow-down'></ion-icon>
      </button></p>
  <p>{{menu.content}}</p>
    금액: {{ subTotal(menu)}}원 
  
     </ion-item>
    </ion-list>
</template>
<div *ngIf="menu != undefined">
  <textarea [(ngModel)]="orderContent" name="orderConten"> </textarea>
  <br>
   최종 주문금액: {{ total }} 
  <button ion-button (click) = payment(total)>결제하기</button>
  <ion-icon name="heart"></ion-icon>   
</div>
</ion-content>