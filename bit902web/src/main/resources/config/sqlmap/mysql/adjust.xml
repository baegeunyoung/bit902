<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.smartpayweb.repository.mapper.AdjustMapper">

	<resultMap type="DayAdjustVO" id="DayAdjustMap">
		<result column="adjust_no" property="adjustNo" />
		<result column="total_number" property="totalNumber" />
		<result column="total_sales" property="totalSales" />
		<result column="adjust_date" property="adjustDate" />
		<result column="store_no" property="storeNo" />
		<result column="store_name" property="storeName" />
		<result column="menu_no" property="menuNo" />
		<result column="menu_name" property="menuName" />
	</resultMap>


<!-- 일일정산 첫화면 -->
	<select id="retrieveDayAdjust" parameterType="int" resultMap="DayAdjustMap">
		select *
		  from tb_adjust a
		 where a.store_no = (
		 		select s.store_no
				  from tb_store s
				 where seller_no = #{sellerNo}
				) and
				adjust_date = current_date()
	</select>

<!-- 일일정산 날짜 선택 -->
	<select id="retrieveDayAdjustRe" parameterType="string" resultMap="DayAdjustMap">
		select *
		from tb_adjust
		where adjust_date = #{dDay}
	</select>


	<resultMap type="MonthAdjustVO" id="MonthAdjustMap">
		<result column="adjust_month_no" property="adjustMonthNo" />
		<result column="total_month_sales" property="totalMonthSales" />
		<result column="adjust_month_date" property="adjustMonthDate" />
		<result column="store_no" property="storeNo" />
	</resultMap>


<!-- 월별정산 첫화면 -->
	<select id="retrieveMonthAdjust" resultMap="MonthAdjustMap">
		select *
		  from tb_adjust_month
		 where year(adjust_month_date) = year(now()) and month(adjust_month_date) = month(now())
		 order by adjust_month_date
	</select>

<!-- 월별정산 달 선택 -->
	<select id="retrieveMonthAdjustRe" parameterType="hashMap" resultMap="MonthAdjustMap">
		select *
		  from tb_adjust_month
		 where year(adjust_month_date) = #{cYear} and month(adjust_month_date) = #{cMonth}
		 order by adjust_month_date
	</select>
</mapper>
